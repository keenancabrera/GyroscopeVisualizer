(function(){"use strict";var t={8395:function(t,e,a){var i=a(9242),s=a(3396),n=a(7139);const r={key:0};function l(t,e,a,i,l,o){const u=(0,s.up)("v-card-title"),h=(0,s.up)("v-card-subtitle"),c=(0,s.up)("v-card-item"),d=(0,s.up)("v-slider"),m=(0,s.up)("v-card-text"),p=(0,s.up)("v-card"),v=(0,s.up)("v-btn"),f=(0,s.up)("v-col"),w=(0,s.up)("v-row"),g=(0,s.up)("v-container"),S=(0,s.up)("gyroscopeSimulator"),b=(0,s.up)("v-sheet"),y=(0,s.up)("v-main"),P=(0,s.up)("v-app");return(0,s.wg)(),(0,s.j4)(P,{id:"gyro"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"bg-grey-lighten-3"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{fluid:!0,class:"ma-0 pa-2 v-flex full-width"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,{cols:"4"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{rounded:"lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"mb-5"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Parameters")])),_:1}),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Set dimensions of gyroscope and strength of gravity")])),_:1})])),_:1}),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.parameters,((t,e)=>((0,s.wg)(),(0,s.j4)(d,{min:t.min,max:t.max,"thumb-label":"always",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,key:e,class:"mt-2"},{prepend:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(t.symbol)+" : ",1)])),_:2},1032,["min","max","modelValue","onUpdate:modelValue"])))),128))])),_:1})])),_:1}),(0,s.Wm)(p,{rounded:"lg",class:"mt-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"mb-5"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Initial State")])),_:1}),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Set initial state of gyroscope")])),_:1})])),_:1}),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.initialState,((t,e)=>((0,s.wg)(),(0,s.j4)(d,{min:t.min,max:t.max,"thumb-label":"always",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,key:e,class:"mt-2"},{prepend:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(t.symbol)+" ",1),t.subscript?((0,s.wg)(),(0,s.iD)("sub",r,(0,n.zw)(t.subscript),1)):(0,s.kq)("",!0),(0,s.Uk)(" : ")])),_:2},1032,["min","max","modelValue","onUpdate:modelValue"])))),128))])),_:1})])),_:1}),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{block:"",color:"green",variant:"outlined",onClick:e[0]||(e[0]=t=>o.runSolver(this.solverParameters.t0.value,[this.computedState.theta,this.computedState.phi,this.computedState.psi,this.computedState.pTheta,this.computedState.pPhi,this.computedState.pPsi],this.solverParameters.numSteps.value))},{default:(0,s.w5)((()=>[(0,s.Uk)(" START ")])),_:1})])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{block:"",color:"red",variant:"outlined",onClick:e[1]||(e[1]=e=>t.isSolving=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)(" STOP ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(f,{cols:"8"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{rounded:"lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{solution:t.solution,parameters:t.parameters,state:o.computedState,isSolving:t.isSolving},null,8,["solution","parameters","state","isSolving"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}a(560);const o={ref:"sceneContainer",class:"scene-container"};function u(t,e,a,i,n,r){return(0,s.wg)(),(0,s.iD)("div",o,null,512)}var h=a(1114);function c(t,e){const a=new h.cPb(75,t.clientWidth/t.clientHeight,.1,1e3);return a.up.set(0,0,1),a.position.set(1.5*e.l.max,1.5*e.l.max,1.5*e.l.max),a.lookAt(0,0,0),a}class d{constructor(t,e,a,i){this.thetaStart=a,this.oldPsi=t.psi,this.parameters=e,this.oldPosition=new h.Pa4;let s=new h.fHI(e.a.value,e.a.value,e.h.value,32,1,!1,a,Math.PI),n=new h.YBo({color:i});this.cylinder=new h.Kj0(s,n),this.cylinder.castShadow=!0,this.cylinder.rotation.set(Math.PI/2,0,0),this.cylinder.position.set(0,0,this.parameters.l.value),this.cylinder.getWorldPosition(this.oldPosition),this.tick(t)}get object(){return this.cylinder}changeParameters(t){let e=new h.fHI(t.a.value,t.a.value,t.h.value,32,1,!1,this.thetaStart,Math.PI);this.cylinder.geometry.dispose(),this.cylinder.geometry=e}tick(t,e=!0){if(0==e)return void this.cylinder.position.set(t["x"],t["y"],t["z"]);let a=new h.Pa4(t["x"],t["y"],t["z"]),i=this.oldPosition.angleTo(a),s=a.clone().sub(this.oldPosition),n=(new h.Pa4).crossVectors(s,this.oldPosition);this.cylinder.position.set(t["x"],t["y"],t["z"]),this.cylinder.rotateOnWorldAxis(n.normalize(),-i),this.cylinder.rotateOnWorldAxis(a.normalize(),t["psi"]-this.oldPsi),this.oldPosition=a.clone(),this.oldPsi=t["psi"]}}function m(){const t=new h.xsS;return t.background=null,t}a(4224),a(1121),a(7133);class p{constructor(t,e){this.parameters=e,this.verticies=new Float32Array([0,0,0,t["x"]*(e.l.max/e.l.value),t["y"]*(e.l.max/e.l.value),t["z"]*(e.l.max/e.l.value)]);let a=new h.nls({color:"white",linewidth:1}),i=new h.u9r;this.rod=new h.x12(i,a),this.rod.geometry.setAttribute("position",new h.TlE(this.verticies,3))}get object(){return this.rod}tick(t){this.verticies[3]=t["x"]*(this.parameters.l.max/this.parameters.l.value),this.verticies[4]=t["y"]*(this.parameters.l.max/this.parameters.l.value),this.verticies[5]=t["z"]*(this.parameters.l.max/this.parameters.l.value),this.rod.geometry.setAttribute("position",new h.TlE(this.verticies,3))}}function v(t){let e=new h.PMe(16777215,1,0,Math.PI/5,0);e.position.set(0,0,2*t.l.max),e.castShadow=!0,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,e.shadow.camera.near=.1,e.shadow.camera.far=4*t.l.max;let a=new h.vmT("white","black",.2);return[e,a]}function f(t){let e=new h.zf8(3.1*t.l.max*Math.tan(Math.PI/5),500),a=new h.YBo({color:"gray",side:h.ehD});e.translate(0,0,1.1*-t.l.max);let i=new h.Kj0(e,a);return i.receiveShadow=!0,i}function w(){const t=new h.CP7;return t.useLegacyLights=!0,t.shadowMap.enabled=!0,t}const g=new h.SUY;class S{constructor(t,e,a,i,s){this.camera=t,this.scene=e,this.renderer=a,this.controls=i,this.updatables=[],this.solution=s,this.isPaused=!1,this.stepSize=1/240}start(t,e=!1){this.isPaused=e,g.getDelta(),this.renderer.setAnimationLoop((()=>{0==this.isPaused?this.tick():this.Pause(t),this.controls.update(),this.renderer.render(this.scene,this.camera)}))}Pause(t){this.isPaused=!0;for(const e of this.updatables)e.tick(t);this.renderer.render(this.scene,this.camera)}tick(){let t=g.getDelta();for(const e of this.updatables)e.tick(this.solution[0]);for(let e=0;e<=Math.round(t/this.stepSize);e++)this.solution.shift()}}var b=a(4543);function y(t,e){const a=new b.z(t,e);return a.enablePan=!1,a}const P=(t,e,a)=>{e.aspect=t.clientWidth/t.clientHeight,e.updateProjectionMatrix(),a.setSize(t.clientWidth,t.clientHeight),a.setPixelRatio(window.devicePixelRatio)};class x{constructor(t,e,a){P(t,e,a),window.addEventListener("resize",(()=>{P(t,e,a),this.onResize()}))}onResize(){}}let k,M,_,W,z;class j{constructor(t,e,a,i){this.parameters=e,this.state=a,k=c(t,this.parameters),_=m(),M=w(),M.setSize(t.clientWidth,t.clientHeight),M.setPixelRatio(window.devicePixelRatio),t.append(M.domElement);const s=new x(t,k,M);s.onResize=()=>{this.render()},z=y(k,M.domElement),z.listenToKeyEvents(t),W=new S(k,_,M,z,i),[this.spotLight,this.hemisphereLight]=v(this.parameters),this.floor=f(this.parameters),this.blueHalf=new d(this.state,e,0,"cornflowerblue"),this.redHalf=new d(this.state,e,Math.PI,"crimson"),this.rod=new p(this.state,this.parameters),W.updatables.push(this.blueHalf),W.updatables.push(this.redHalf),W.updatables.push(this.rod),_.add(this.blueHalf.object,this.redHalf.object,this.rod.object,this.spotLight,this.hemisphereLight,this.floor),W.start(this.state,!0)}render(){M.render(_,k)}updateSolution(t){W.solution=t,W.start(this.state)}updateParameters(t){this.parameters=t,W.isPaused=!0,this.blueHalf.changeParameters(this.parameters),this.redHalf.changeParameters(this.parameters)}updateState(t){this.state=t,W.isPaused=!0,this.blueHalf.tick(this.state),this.redHalf.tick(this.state),this.rod.tick(this.state)}pause(t){this.state=t,W.isPaused=!0}}var O={name:"gyroscopeSimulator",props:{solution:Object,parameters:Object,state:Object,isSolving:Boolean},watch:{solution:{handler(){this.gyroscopeAnimation.updateSolution(this.solution)},deep:!1,flush:"post"},parameters:{handler(){this.gyroscopeAnimation.updateParameters(this.parameters)},deep:!0},state:{handler(){this.gyroscopeAnimation.updateState(this.state)},deep:!0},isSolving:{handler(){0==this.isSolving&&this.gyroscopeAnimation.updateState(this.state)}}},data(){return{}},mounted(){this.gyroscopeAnimation=new j(this.$refs.sceneContainer,this.parameters,this.state,this.solution),this.gyroscopeAnimation.render()}},H=a(89);const V=(0,H.Z)(O,[["render",u],["__scopeId","data-v-107dcdd4"]]);var A=V,T={name:"app",components:{gyroscopeSimulator:A},data:()=>({parameters:{l:{value:5,min:1,max:10,symbol:"l"},a:{value:2,min:1,max:5,symbol:"a"},h:{value:.5,min:.1,max:1,symbol:"h"},g:{value:9.8,min:0,max:10,symbol:"g"}},solverParameters:{stepSize:{value:1/240},numSteps:{value:1200},t0:{value:0}},animationParameters:{rstride:15,cstride:5,nSample:45,dpi:300,transparency:.8},initialState:{theta:{value:0,min:0,max:6.28,symbol:"𝛉"},phi:{value:.2,min:.01,max:6.28,symbol:"𝜙"},psi:{value:0,min:0,max:6.28,symbol:"𝛙"},thetaVel:{value:0,min:0,max:12,symbol:"ω",subscript:"𝛉"},phiVel:{value:0,min:0,max:12,symbol:"ω",subscript:"𝜙"},psiVel:{value:0,min:0,max:100,symbol:"ω",subscript:"𝛙"}},solution:[],isSolving:!1,lastSolverStep:null}),computed:{computedState(){let t={...this.initialState};for(let e in t)t[e]=t[e].value;return Object.assign(t,this.getCartesian(t.theta,t.phi)),Object.assign(t,this.getGeneralizedMomenta()),t}},watch:{solution:{handler(t){t.length<this.solverParameters.numSteps.value/2&&1==this.isSolving&&this.runSolver(this.lastSolverStep["t0"],this.lastSolverStep["state"],this.solverParameters.numSteps.value/10,!1)},deep:!0}},methods:{gyroscope(t,e){let[a,i,s,n,r,l]=e;a=s,s=a;let o=r/this.parameters.l.value**2,u=(n-l*Math.cos(i))/(this.parameters.l.value**2*Math.sin(i)**2),h=l/(this.parameters.a.value**2/4)-u*Math.cos(i),c=0,d=(this.parameters.l.value**2+this.parameters.a.value**2/4)*Math.sin(i)*Math.cos(i)*u**2+(this.parameters.g.value*this.parameters.l.value-this.parameters.a.value**2/4*h*u)*Math.sin(i),m=0;return[u,o,h,c,d,m]},rungeKutta(t,e,a,i,s){function n(t,e){return t.map(((t,a)=>t+e[a]))}function r(t,e){return e.map((e=>t*e))}const l=[];l.push({t:a,state:e});for(let o=1;o<=s;o++){const s=a+o*i,u=r(i,t(a,e)),h=r(i,t(a+i/2,n(e,r(.5,u)))),c=r(i,t(a+i/2,n(e,r(.5,h)))),d=r(i,t(a+i,n(e,c)));e=n(e,r(1/6,n(u,n(r(2,h),n(r(2,c),d))))),a=s,l.push({t:s,state:e})}return l},updateSolution(t){for(let e of t){let t={theta:e.state[0],phi:e.state[1],psi:e.state[2],...this.getCartesian(e.state[0],e.state[1])};this.solution.push(t)}},runSolver(t,e,a,i=!0){1==i&&(this.solution=[]),this.isSolving=!0;let s=this.rungeKutta(this.gyroscope,e,t,this.solverParameters.stepSize.value,a);this.lastSolverStep=s[s.length-1],this.updateSolution(s)},getCartesian(t,e){let a=this.parameters.l.value*Math.cos(t)*Math.sin(e),i=this.parameters.l.value*Math.sin(t)*Math.sin(e),s=this.parameters.l.value*Math.cos(e);return{x:a,y:i,z:s}},getGeneralizedMomenta(){let t=(this.parameters.l.value**2*Math.sin(this.initialState.phi.value)**2+this.parameters.a.value**2/4*Math.cos(this.initialState.phi.value)**2)*this.initialState.thetaVel.value+this.parameters.a.value**2/4*this.initialState.psiVel.value*Math.cos(this.initialState.phi.value),e=this.parameters.l.value**2*this.initialState.phiVel.value,a=this.parameters.a.value**2/4*(this.initialState.thetaVel.value*Math.cos(this.initialState.phi.value)+this.initialState.psiVel.value);return{pTheta:t,pPhi:e,pPsi:a}}}};const U=(0,H.Z)(T,[["render",l]]);var C=U,I=(a(9773),a(8727)),R=a(3447),L=a(8600);const D=(0,I.Rd)({components:R,directives:L});(0,i.ri)(C).use(D).mount("#app")}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,i,s,n){if(!i){var r=1/0;for(h=0;h<t.length;h++){i=t[h][0],s=t[h][1],n=t[h][2];for(var l=!0,o=0;o<i.length;o++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](i[o])}))?i.splice(o--,1):(l=!1,n<r&&(r=n));if(l){t.splice(h--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[i,s,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={826:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,r=i[0],l=i[1],o=i[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(o)var h=o(a)}for(e&&e(i);u<r.length;u++)n=r[u],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(h)},i=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(8395)}));i=a.O(i)})();
//# sourceMappingURL=index.a66ab4f5.js.map