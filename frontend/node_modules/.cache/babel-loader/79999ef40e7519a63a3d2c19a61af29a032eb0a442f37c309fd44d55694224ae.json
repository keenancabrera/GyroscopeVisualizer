{"ast":null,"code":"import LightingModel from '../core/LightingModel.js';\nimport F_Schlick from './BSDF/F_Schlick.js';\nimport BRDF_Lambert from './BSDF/BRDF_Lambert.js';\nimport { diffuseColor } from '../core/PropertyNode.js';\nimport { transformedNormalView } from '../accessors/NormalNode.js';\nimport { materialSpecularStrength } from '../accessors/MaterialNode.js';\nimport { shininess, specularColor } from '../core/PropertyNode.js';\nimport { positionViewDirection } from '../accessors/PositionNode.js';\nimport { tslFn, float } from '../shadernode/ShaderNode.js';\nconst G_BlinnPhong_Implicit = () => float(0.25);\nconst D_BlinnPhong = tslFn(({\n  dotNH\n}) => {\n  return shininess.mul(0.5 / Math.PI).add(1.0).mul(dotNH.pow(shininess));\n});\nconst BRDF_BlinnPhong = tslFn(({\n  lightDirection\n}) => {\n  const halfDir = lightDirection.add(positionViewDirection).normalize();\n  const dotNH = transformedNormalView.dot(halfDir).clamp();\n  const dotVH = positionViewDirection.dot(halfDir).clamp();\n  const F = F_Schlick({\n    f0: specularColor,\n    f90: 1.0,\n    dotVH\n  });\n  const G = G_BlinnPhong_Implicit();\n  const D = D_BlinnPhong({\n    dotNH\n  });\n  return F.mul(G).mul(D);\n});\nclass PhongLightingModel extends LightingModel {\n  constructor(specular = true) {\n    super();\n    this.specular = specular;\n  }\n  direct({\n    lightDirection,\n    lightColor,\n    reflectedLight\n  }) {\n    const dotNL = transformedNormalView.dot(lightDirection).clamp();\n    const irradiance = dotNL.mul(lightColor);\n    reflectedLight.directDiffuse.addAssign(irradiance.mul(BRDF_Lambert({\n      diffuseColor: diffuseColor.rgb\n    })));\n    if (this.specular === true) {\n      reflectedLight.directSpecular.addAssign(irradiance.mul(BRDF_BlinnPhong({\n        lightDirection\n      })).mul(materialSpecularStrength));\n    }\n  }\n  indirectDiffuse({\n    irradiance,\n    reflectedLight\n  }) {\n    reflectedLight.indirectDiffuse.addAssign(irradiance.mul(BRDF_Lambert({\n      diffuseColor\n    })));\n  }\n}\nexport default PhongLightingModel;","map":{"version":3,"names":["LightingModel","F_Schlick","BRDF_Lambert","diffuseColor","transformedNormalView","materialSpecularStrength","shininess","specularColor","positionViewDirection","tslFn","float","G_BlinnPhong_Implicit","D_BlinnPhong","dotNH","mul","Math","PI","add","pow","BRDF_BlinnPhong","lightDirection","halfDir","normalize","dot","clamp","dotVH","F","f0","f90","G","D","PhongLightingModel","constructor","specular","direct","lightColor","reflectedLight","dotNL","irradiance","directDiffuse","addAssign","rgb","directSpecular","indirectDiffuse"],"sources":["/Users/cabrera/Documents/GyroscopeVisualizer/frontend/node_modules/three/examples/jsm/nodes/functions/PhongLightingModel.js"],"sourcesContent":["import LightingModel from '../core/LightingModel.js';\nimport F_Schlick from './BSDF/F_Schlick.js';\nimport BRDF_Lambert from './BSDF/BRDF_Lambert.js';\nimport { diffuseColor } from '../core/PropertyNode.js';\nimport { transformedNormalView } from '../accessors/NormalNode.js';\nimport { materialSpecularStrength } from '../accessors/MaterialNode.js';\nimport { shininess, specularColor } from '../core/PropertyNode.js';\nimport { positionViewDirection } from '../accessors/PositionNode.js';\nimport { tslFn, float } from '../shadernode/ShaderNode.js';\n\nconst G_BlinnPhong_Implicit = () => float( 0.25 );\n\nconst D_BlinnPhong = tslFn( ( { dotNH } ) => {\n\n\treturn shininess.mul( 0.5 / Math.PI ).add( 1.0 ).mul( dotNH.pow( shininess ) );\n\n} );\n\nconst BRDF_BlinnPhong = tslFn( ( { lightDirection } ) => {\n\n\tconst halfDir = lightDirection.add( positionViewDirection ).normalize();\n\n\tconst dotNH = transformedNormalView.dot( halfDir ).clamp();\n\tconst dotVH = positionViewDirection.dot( halfDir ).clamp();\n\n\tconst F = F_Schlick( { f0: specularColor, f90: 1.0, dotVH } );\n\tconst G = G_BlinnPhong_Implicit();\n\tconst D = D_BlinnPhong( { dotNH } );\n\n\treturn F.mul( G ).mul( D );\n\n} );\n\nclass PhongLightingModel extends LightingModel {\n\n\tconstructor( specular = true ) {\n\n\t\tsuper();\n\n\t\tthis.specular = specular;\n\n\t}\n\n\tdirect( { lightDirection, lightColor, reflectedLight } ) {\n\n\t\tconst dotNL = transformedNormalView.dot( lightDirection ).clamp();\n\t\tconst irradiance = dotNL.mul( lightColor );\n\n\t\treflectedLight.directDiffuse.addAssign( irradiance.mul( BRDF_Lambert( { diffuseColor: diffuseColor.rgb } ) ) );\n\n\t\tif ( this.specular === true ) {\n\n\t\t\treflectedLight.directSpecular.addAssign( irradiance.mul( BRDF_BlinnPhong( { lightDirection } ) ).mul( materialSpecularStrength ) );\n\n\t\t}\n\n\t}\n\n\tindirectDiffuse( { irradiance, reflectedLight } ) {\n\n\t\treflectedLight.indirectDiffuse.addAssign( irradiance.mul( BRDF_Lambert( { diffuseColor } ) ) );\n\n\t}\n\n}\n\nexport default PhongLightingModel;\n"],"mappings":"AAAA,OAAOA,aAAa,MAAM,0BAA0B;AACpD,OAAOC,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,YAAY,MAAM,wBAAwB;AACjD,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,qBAAqB,QAAQ,4BAA4B;AAClE,SAASC,wBAAwB,QAAQ,8BAA8B;AACvE,SAASC,SAAS,EAAEC,aAAa,QAAQ,yBAAyB;AAClE,SAASC,qBAAqB,QAAQ,8BAA8B;AACpE,SAASC,KAAK,EAAEC,KAAK,QAAQ,6BAA6B;AAE1D,MAAMC,qBAAqB,GAAGA,CAAA,KAAMD,KAAK,CAAE,IAAK,CAAC;AAEjD,MAAME,YAAY,GAAGH,KAAK,CAAE,CAAE;EAAEI;AAAM,CAAC,KAAM;EAE5C,OAAOP,SAAS,CAACQ,GAAG,CAAE,GAAG,GAAGC,IAAI,CAACC,EAAG,CAAC,CAACC,GAAG,CAAE,GAAI,CAAC,CAACH,GAAG,CAAED,KAAK,CAACK,GAAG,CAAEZ,SAAU,CAAE,CAAC;AAE/E,CAAE,CAAC;AAEH,MAAMa,eAAe,GAAGV,KAAK,CAAE,CAAE;EAAEW;AAAe,CAAC,KAAM;EAExD,MAAMC,OAAO,GAAGD,cAAc,CAACH,GAAG,CAAET,qBAAsB,CAAC,CAACc,SAAS,CAAC,CAAC;EAEvE,MAAMT,KAAK,GAAGT,qBAAqB,CAACmB,GAAG,CAAEF,OAAQ,CAAC,CAACG,KAAK,CAAC,CAAC;EAC1D,MAAMC,KAAK,GAAGjB,qBAAqB,CAACe,GAAG,CAAEF,OAAQ,CAAC,CAACG,KAAK,CAAC,CAAC;EAE1D,MAAME,CAAC,GAAGzB,SAAS,CAAE;IAAE0B,EAAE,EAAEpB,aAAa;IAAEqB,GAAG,EAAE,GAAG;IAAEH;EAAM,CAAE,CAAC;EAC7D,MAAMI,CAAC,GAAGlB,qBAAqB,CAAC,CAAC;EACjC,MAAMmB,CAAC,GAAGlB,YAAY,CAAE;IAAEC;EAAM,CAAE,CAAC;EAEnC,OAAOa,CAAC,CAACZ,GAAG,CAAEe,CAAE,CAAC,CAACf,GAAG,CAAEgB,CAAE,CAAC;AAE3B,CAAE,CAAC;AAEH,MAAMC,kBAAkB,SAAS/B,aAAa,CAAC;EAE9CgC,WAAWA,CAAEC,QAAQ,GAAG,IAAI,EAAG;IAE9B,KAAK,CAAC,CAAC;IAEP,IAAI,CAACA,QAAQ,GAAGA,QAAQ;EAEzB;EAEAC,MAAMA,CAAE;IAAEd,cAAc;IAAEe,UAAU;IAAEC;EAAe,CAAC,EAAG;IAExD,MAAMC,KAAK,GAAGjC,qBAAqB,CAACmB,GAAG,CAAEH,cAAe,CAAC,CAACI,KAAK,CAAC,CAAC;IACjE,MAAMc,UAAU,GAAGD,KAAK,CAACvB,GAAG,CAAEqB,UAAW,CAAC;IAE1CC,cAAc,CAACG,aAAa,CAACC,SAAS,CAAEF,UAAU,CAACxB,GAAG,CAAEZ,YAAY,CAAE;MAAEC,YAAY,EAAEA,YAAY,CAACsC;IAAI,CAAE,CAAE,CAAE,CAAC;IAE9G,IAAK,IAAI,CAACR,QAAQ,KAAK,IAAI,EAAG;MAE7BG,cAAc,CAACM,cAAc,CAACF,SAAS,CAAEF,UAAU,CAACxB,GAAG,CAAEK,eAAe,CAAE;QAAEC;MAAe,CAAE,CAAE,CAAC,CAACN,GAAG,CAAET,wBAAyB,CAAE,CAAC;IAEnI;EAED;EAEAsC,eAAeA,CAAE;IAAEL,UAAU;IAAEF;EAAe,CAAC,EAAG;IAEjDA,cAAc,CAACO,eAAe,CAACH,SAAS,CAAEF,UAAU,CAACxB,GAAG,CAAEZ,YAAY,CAAE;MAAEC;IAAa,CAAE,CAAE,CAAE,CAAC;EAE/F;AAED;AAEA,eAAe4B,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}