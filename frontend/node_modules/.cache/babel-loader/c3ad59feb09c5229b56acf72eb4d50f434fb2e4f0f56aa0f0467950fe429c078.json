{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import { pushScopeId } from 'vue'\nimport gyroscopeSimulator from './components/gyroscopeSimulator';\n// import _ from 'lodash'\n// import { popScopeId } from 'vue'\n// import { ref, onMounted } from 'vue'\n\nexport default {\n  name: 'app',\n  components: {\n    gyroscopeSimulator\n  },\n  data: () => ({\n    parameters: {\n      \"l\": {\n        value: 5,\n        min: 1,\n        max: 10,\n        symbol: 'l'\n      },\n      \"a\": {\n        value: 2,\n        min: 1,\n        max: 5,\n        symbol: 'a'\n      },\n      \"h\": {\n        value: 0.5,\n        min: 0.1,\n        max: 1,\n        symbol: 'h'\n      },\n      \"g\": {\n        value: 9.8,\n        min: 0,\n        max: 10,\n        symbol: 'g'\n      }\n    },\n    solverParameters: {\n      \"stepSize\": {\n        value: 1 / 240\n      },\n      \"numSteps\": {\n        value: 240 * 5\n      },\n      // total animation time in seconds is stepSize * numSteps\n      't0': {\n        value: 0\n      }\n    },\n    animationParameters: {\n      \"rstride\": 15,\n      \"cstride\": 5,\n      \"nSample\": 45,\n      \"dpi\": 300,\n      \"transparency\": 0.8\n    },\n    initialState: {\n      \"theta\": {\n        value: 0,\n        min: 0,\n        max: 6.28,\n        symbol: 'ùõâ'\n      },\n      \"phi\": {\n        value: 0.2,\n        min: 0.01,\n        max: 6.28,\n        symbol: 'ùúô'\n      },\n      \"psi\": {\n        value: 0,\n        min: 0,\n        max: 6.28,\n        symbol: 'ùõô'\n      },\n      \"thetaVel\": {\n        value: 0,\n        min: 0,\n        max: 12,\n        symbol: 'œâ',\n        subscript: 'ùõâ'\n      },\n      \"phiVel\": {\n        value: 0,\n        min: 0,\n        max: 12,\n        symbol: 'œâ',\n        subscript: 'ùúô'\n      },\n      \"psiVel\": {\n        value: 0,\n        min: 0,\n        max: 100,\n        symbol: 'œâ',\n        subscript: 'ùõô'\n      }\n    },\n    solution: [],\n    isSolving: false,\n    // boolean to track whether or not simulation is running.\n    lastSolverStep: null // saves last solver step for use in generating continuous solution\n  }),\n\n  computed: {\n    computedState() {\n      let state = {\n        ...this.initialState\n      };\n      for (let key in state) {\n        state[key] = state[key].value;\n      }\n      Object.assign(state, this.getCartesian(state.theta, state.phi));\n      Object.assign(state, this.getGeneralizedMomenta());\n      return state;\n    }\n  },\n  watch: {\n    solution: {\n      handler(newValue) {\n        //let throttleSolver = _.throttle(this.runSolver(this.lastSolverStep['t0'], this.lastSolverStep['state'], false), 1000)\n        if (newValue.length < this.solverParameters.numSteps.value / 2 && this.isSolving == true) {\n          this.runSolver(this.lastSolverStep['t0'], this.lastSolverStep['state'], this.solverParameters.numSteps.value / 10, false);\n          console.log(\"RECOMPUTING\");\n          console.log(\"Len of array is : \" + newValue.length);\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    gyroscope(t, stateVector) {\n      // returns dstateVector/dt\n      let [theta, phi, psi, pTheta, pPhi, pPsi] = stateVector;\n\n      // DON'T ANGER THE LINTER\n      theta = psi;\n      psi = theta;\n      let phiVel = pPhi / this.parameters.l.value ** 2;\n      let thetaVel = (pTheta - pPsi * Math.cos(phi)) / (this.parameters.l.value ** 2 * Math.sin(phi) ** 2);\n      let psiVel = pPsi / (this.parameters.a.value ** 2 / 4) - thetaVel * Math.cos(phi);\n      let pThetaDot = 0;\n      let pPhiDot = (this.parameters.l.value ** 2 + this.parameters.a.value ** 2 / 4) * Math.sin(phi) * Math.cos(phi) * thetaVel ** 2 + (this.parameters.g.value * this.parameters.l.value - this.parameters.a.value ** 2 / 4 * psiVel * thetaVel) * Math.sin(phi);\n      let pPsiDot = 0;\n      return [thetaVel, phiVel, psiVel, pThetaDot, pPhiDot, pPsiDot];\n    },\n    rungeKutta(engine, state, t0, stepSize, numSteps) {\n      // Helper functions for rungeKutta solver\n      function numericAdd(a, b) {\n        return a.map((ai, i) => ai + b[i]);\n      }\n      function numericMul(scalar, vector) {\n        return vector.map(vi => scalar * vi);\n      }\n\n      // Variable Instantiation\n      const result = [];\n      result.push({\n        t: t0,\n        state: state\n      });\n\n      // Solve\n      for (let i = 1; i <= numSteps; i++) {\n        const t = t0 + i * stepSize;\n        const k1 = numericMul(stepSize, engine(t0, state));\n        const k2 = numericMul(stepSize, engine(t0 + stepSize / 2, numericAdd(state, numericMul(0.5, k1))));\n        const k3 = numericMul(stepSize, engine(t0 + stepSize / 2, numericAdd(state, numericMul(0.5, k2))));\n        const k4 = numericMul(stepSize, engine(t0 + stepSize, numericAdd(state, k3)));\n        state = numericAdd(state, numericMul(1 / 6, numericAdd(k1, numericAdd(numericMul(2, k2), numericAdd(numericMul(2, k3), k4)))));\n        t0 = t;\n        result.push({\n          t,\n          state: state\n        });\n      }\n      return result;\n    },\n    updateSolution(solution) {\n      for (let elem of solution) {\n        let entry = {\n          theta: elem.state[0],\n          phi: elem.state[1],\n          psi: elem.state[2],\n          ...this.getCartesian(elem.state[0], elem.state[1])\n        };\n        this.solution.push(entry);\n      }\n    },\n    runSolver(t0, stateVector, numSteps, clearSolution = true) {\n      if (clearSolution == true) {\n        this.solution = [];\n      }\n      this.isSolving = true;\n      let solution = this.rungeKutta(this.gyroscope, stateVector, t0, this.solverParameters.stepSize.value, numSteps);\n      this.lastSolverStep = solution[solution.length - 1];\n      this.updateSolution(solution);\n    },\n    getCartesian(theta, phi) {\n      // return cartesian coordinates from theta, phi, and psi\n      let x = this.parameters.l.value * Math.cos(theta) * Math.sin(phi);\n      let y = this.parameters.l.value * Math.sin(theta) * Math.sin(phi);\n      let z = this.parameters.l.value * Math.cos(phi);\n      return {\n        x: x,\n        y: y,\n        z: z\n      };\n    },\n    getGeneralizedMomenta() {\n      let pTheta = (this.parameters.l.value ** 2 * Math.sin(this.initialState.phi.value) ** 2 + this.parameters.a.value ** 2 / 4 * Math.cos(this.initialState.phi.value) ** 2) * this.initialState.thetaVel.value + this.parameters.a.value ** 2 / 4 * this.initialState.psiVel.value * Math.cos(this.initialState.phi.value);\n      let pPhi = this.parameters.l.value ** 2 * this.initialState.phiVel.value;\n      let pPsi = this.parameters.a.value ** 2 / 4 * (this.initialState.thetaVel.value * Math.cos(this.initialState.phi.value) + this.initialState.psiVel.value);\n      return {\n        pTheta: pTheta,\n        pPhi: pPhi,\n        pPsi: pPsi\n      };\n    }\n  }\n};","map":{"version":3,"names":["gyroscopeSimulator","name","components","data","parameters","value","min","max","symbol","solverParameters","animationParameters","initialState","subscript","solution","isSolving","lastSolverStep","computed","computedState","state","key","Object","assign","getCartesian","theta","phi","getGeneralizedMomenta","watch","handler","newValue","length","numSteps","runSolver","console","log","deep","methods","gyroscope","t","stateVector","psi","pTheta","pPhi","pPsi","phiVel","l","thetaVel","Math","cos","sin","psiVel","a","pThetaDot","pPhiDot","g","pPsiDot","rungeKutta","engine","t0","stepSize","numericAdd","b","map","ai","i","numericMul","scalar","vector","vi","result","push","k1","k2","k3","k4","updateSolution","elem","entry","clearSolution","x","y","z"],"sources":["/Users/cabrera/Documents/GyroscopeVisualizer/frontend/src/App.vue"],"sourcesContent":["<template>\n  <v-app id=\"gyro\">\n    <v-main class=\"bg-grey-lighten-3 \">\n      <v-container :fluid=\"true\" class=\"ma-0 pa-2 v-flex full-width\">\n        <v-row>\n          <v-col cols=\"4\">\n            <v-card rounded=\"lg\">\n\n              <v-card-item class=\"mb-5\">\n                <v-card-title>Parameters</v-card-title>\n                <v-card-subtitle>Set dimensions of gyroscope and strength of gravity</v-card-subtitle>\n              </v-card-item>\n\n              <v-card-text>\n                <v-slider \n                  v-for=\"(parameter, key) in parameters\" \n                  :min=\"parameter.min\" \n                  :max=\"parameter.max\" \n                  :thumb-label=\"'always'\"\n                  v-model=\"parameter.value\" \n                  :key=\"key\"\n                  class=\"mt-2\"\n                  >\n                  <template v-slot:prepend>\n                    {{ parameter.symbol }} :\n                  </template>\n                </v-slider>                \n              </v-card-text>\n            </v-card>\n            \n            <v-card rounded=\"lg\" class=\"mt-2\">\n              \n              <v-card-item class=\"mb-5\">\n                <v-card-title>Initial State</v-card-title>\n                <v-card-subtitle>Set initial state of gyroscope</v-card-subtitle>\n              </v-card-item>\n\n              <v-card-text>\n                <v-slider \n                  v-for = \"(stateVariable, key) in initialState\"\n                  :min=\"stateVariable.min\" \n                  :max=\"stateVariable.max\" \n                  :thumb-label=\"'always'\"\n                  v-model=\"stateVariable.value\" \n                  :key=\"key\"\n                  class=\"mt-2\"\n                  >\n                  <template v-slot:thumb = \"{value}\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"background-color: rgb(255, 255, 255);\" viewBox=\"-70.08 -218.48 103.91 218.98\"><path d=\"M8.941599829673509e-14,-1.987022184371891e-14L-42.582134215582656,-217.97651833683219\" style=\"fill:none;stroke:rgb(0,0,0);stroke-opacity:1;stroke-width:1;stroke-linecap:round\"/><path d=\"M-23.164908894177334,-124.65721265447951L-27.841948548131423,-123.67975575603586L-19.130582429731515,-97.92880716960055zM-18.450037260564006,-125.39323259897517L-23.164908894177334,-124.65721265447951L-19.130582429731515,-97.92880716960055zM-27.841948548131423,-123.67975575603586L-32.44435166600358,-122.4684405202168L-19.130582429731515,-97.92880716960055zM-13.734405889358598,-125.88170210544835L-18.450037260564006,-125.39323259897517L-19.130582429731515,-97.92880716960055zM-32.44435166600358,-122.4684405202168L-36.935656954202294,-121.03229731057348L-19.130582429731515,-97.92880716960055zM-9.055266887196336,-126.11800091954788L-13.734405889358598,-125.88170210544835L-19.130582429731515,-97.92880716960055zM-36.935656954202294,-121.03229731057348L-41.279857564338116,-119.3818101437528L-19.130582429731515,-97.92880716960055zM-4.449959167845828,-126.0990369666958L-9.055266887196336,-126.11800091954788L-19.130582429731515,-97.92880716960055zM-41.279857564338116,-119.3818101437528L-45.44148188230059,-117.52891082651836L-19.130582429731515,-97.92880716960055zM0.04418302488850141,-125.82329356308067L-4.449959167845828,-126.0990369666958L-19.130582429731515,-97.92880716960055zM-45.44148188230059,-117.52891082651836L-49.38574288714155,-115.48699829599974L-19.130582429731515,-97.92880716960055zM4.389968563166798,-125.2909013671707L0.04418302488850141,-125.82329356308067L-19.130582429731515,-97.92880716960055zM-49.38574288714155,-115.48699829599974L-53.07866043897812,-113.27094564718426L-19.130582429731515,-97.92880716960055zM8.55046660229399,-124.50369370307774L4.389968563166798,-125.2909013671707L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-53.07866043897814,-113.27094564718425L-56.487248203503285,-110.8971156477267L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M12.489204688184511,-123.46530375029268L8.55046660229399,-124.50369370307774L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-56.487248203503285,-110.8971156477267L-59.57971531401549,-108.38336778233935L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M16.1703481836442,-122.1812396232463L12.489204688184511,-123.46530375029268L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-59.57971531401549,-108.38336778233935L-62.325708408417526,-105.74905905317307L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M19.558955219057445,-120.65898144246461L16.1703481836442,-122.1812396232463L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-62.325708408417526,-105.74905905317307L-64.69657987118622,-103.01502264502525L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M22.621254632256182,-118.90806896632309L19.558955219057445,-120.65898144246461L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-64.69657987118622,-103.01502264502525L-66.66571665928267,-100.20354637964722L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M25.32497214446911,-116.94018753089544L22.621254632256182,-118.90806896632309L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-66.66571665928267,-100.20354637964722L-68.20886792555277,-97.33830250260861L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M27.63968781798913,-114.76923109885979L25.32497214446911,-116.94018753089544L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-68.20886792555277,-97.33830250260861L-69.30455152221771,-94.44427230388008L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M29.537259405305637,-112.4113724725031L27.63968781798913,-114.76923109885979L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-69.30455152221771,-94.44427230388008L-69.93445100157359,-91.54761548350582L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M30.992242626962792,-109.88507385665771L29.537259405305637,-112.4113724725031L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-69.93445100157359,-91.54761548350582L-70.08384813863354,-88.67551571456099L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M31.982390356205144,-107.21110198901081L30.992242626962792,-109.88507385665771L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-66.89052205275378,-75.3344031490153L-66.04598137116507,-72.57066400443713L-68.90292744396469,-83.1175640618717z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M33.82536061299073,-90.65601454466923L33.80821098461943,-93.57860043423362L32.489132972752394,-104.41247284358569z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-70.08384813863354,-88.67551571456099L-69.74207059396893,-85.8559750968672L-19.130582429731515,-97.92880716960055zM-69.74207059396893,-85.8559750968672L-66.89052205275378,-75.3344031490153L-68.90292744396469,-83.1175640618717z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M32.489132972752394,-104.41247284358569L31.982390356205144,-107.21110198901081L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-66.04598137116507,-72.57066400443713L-64.71061705016884,-69.91605177906368L-67.56512989339654,-80.48913218397868zM-69.74207059396893,-85.8559750968672L-68.90292744396469,-83.1175640618717L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M33.34268668744955,-87.66345961015345L33.82536061299073,-90.65601454466923L32.49808406389285,-101.51436939881289zM32.49808406389285,-101.51436939881289L33.82536061299073,-90.65601454466923L32.489132972752394,-104.41247284358569zM32.49808406389285,-101.51436939881289L32.489132972752394,-104.41247284358569L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-68.90292744396469,-83.1175640618717L-66.04598137116507,-72.57066400443713L-67.56512989339654,-80.48913218397868zM-68.90292744396469,-83.1175640618717L-67.56512989339654,-80.48913218397868L-19.130582429731515,-97.92880716960055zM-64.71061705016884,-69.91605177906368L-62.88870835576058,-67.39953497144629L-65.73269831349977,-77.99945167750579z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M31.999544710959206,-98.5439993751848L32.49808406389285,-101.51436939881289L-19.130582429731515,-97.92880716960055zM32.355773074796396,-84.63022957863343L33.34268668744955,-87.66345961015345L31.999544710959206,-98.5439993751848zM31.999544710959206,-98.5439993751848L33.34268668744955,-87.66345961015345L32.49808406389285,-101.51436939881289z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-67.56512989339654,-80.48913218397868L-65.73269831349977,-77.99945167750579L-19.130582429731515,-97.92880716960055zM-67.56512989339654,-80.48913218397868L-64.71061705016884,-69.91605177906368L-65.73269831349977,-77.99945167750579z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M30.9889740995609,-95.53039340102306L31.999544710959206,-98.5439993751848L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-62.88870835576058,-67.39953497144629L-60.590056450040464,-65.0496400098617L-63.415269510235156,-75.67685110672176zM-65.73269831349977,-77.99945167750579L-63.415269510235156,-75.67685110672176L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M30.865697503796703,-81.58714963610873L32.355773074796396,-84.63022957863343L30.9889740995609,-95.53039340102306zM30.9889740995609,-95.53039340102306L32.355773074796396,-84.63022957863343L31.999544710959206,-98.5439993751848zM29.467420020218213,-92.50415005651415L30.9889740995609,-95.53039340102306L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-65.73269831349977,-77.99945167750579L-62.88870835576058,-67.39953497144629L-63.415269510235156,-75.67685110672176zM-63.415269510235156,-75.67685110672176L-60.62838701662706,-73.54877092404152L-19.130582429731515,-97.92880716960055zM-60.590056450040464,-65.0496400098617L-57.83026043194765,-62.89400693862615L-60.62838701662706,-73.54877092404152z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M27.44190572765031,-89.49710150875495L29.467420020218213,-92.50415005651415L-19.130582429731515,-97.92880716960055zM28.879405952345277,-78.56623710208689L30.865697503796703,-81.58714963610873L29.467420020218213,-92.50415005651415zM29.467420020218213,-92.50415005651415L30.865697503796703,-81.58714963610873L30.9889740995609,-95.53039340102306z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-60.62838701662706,-73.54877092404152L-57.39365076649181,-71.64132793938165L-19.130582429731515,-97.92880716960055zM-63.415269510235156,-75.67685110672176L-60.590056450040464,-65.0496400098617L-60.62838701662706,-73.54877092404152z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M24.925684601500986,-86.54193973373559L27.44190572765031,-89.49710150875495L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-57.83026043194765,-62.89400693862615L-54.630855251302485,-60.95895446944768L-57.39365076649181,-71.64132793938165zM-57.39365076649181,-71.64132793938165L-53.73878539966556,-69.97883225326507L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M26.409957159961795,-75.60032433507521L28.879405952345277,-78.56623710208689L27.44190572765031,-89.49710150875495zM21.938444279722916,-83.67175836096341L24.925684601500986,-86.54193973373559L-19.130582429731515,-97.92880716960055zM27.44190572765031,-89.49710150875495L28.879405952345277,-78.56623710208689L29.467420020218213,-92.50415005651415z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-60.62838701662706,-73.54877092404152L-57.83026043194765,-62.89400693862615L-57.39365076649181,-71.64132793938165zM-53.73878539966556,-69.97883225326507L-49.697566123406816,-68.5833108197236L-19.130582429731515,-97.92880716960055zM-54.630855251302485,-60.95895446944768L-51.019370009544005,-59.26899769567506L-53.73878539966556,-69.97883225326507z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M18.506337614886707,-80.91957209487846L21.938444279722916,-83.67175836096341L-19.130582429731515,-97.92880716960055zM23.476718311944996,-72.72259802852211L26.409957159961795,-75.60032433507521L24.925684601500986,-86.54193973373559z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-49.697566123406816,-68.5833108197236L-45.30960998649598,-67.47403516084721L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M24.925684601500986,-86.54193973373559L26.409957159961795,-75.60032433507521L27.44190572765031,-89.49710150875495z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M14.661902073464567,-78.31777577618804L18.506337614886707,-80.91957209487846L-19.130582429731515,-97.92880716960055zM-57.39365076649181,-71.64132793938165L-54.630855251302485,-60.95895446944768L-53.73878539966556,-69.97883225326507zM-45.30960998649598,-67.47403516084721L-40.61999735728767,-66.6670848961667L-19.130582429731515,-97.92880716960055zM-51.019370009544005,-59.26899769567506L-47.0292472080988,-57.846372615776005L-49.697566123406816,-68.5833108197236zM10.443812317945309,-75.89758761019199L14.661902073464567,-78.31777577618804L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M20.10539135006583,-69.96611787649282L23.476718311944996,-72.72259802852211L21.938444279722916,-83.67175836096341z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-40.61999735728767,-66.6670848961667L-35.67878555390173,-66.17493157310844L-19.130582429731515,-97.92880716960055zM5.896481158046902,-73.6884802821516L10.443812317945309,-75.89758761019199L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M21.938444279722916,-83.67175836096341L23.476718311944996,-72.72259802852211L24.925684601500986,-86.54193973373559z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-35.67878555390173,-66.17493157310844L-30.540315435056915,-66.00611720873036L-19.130582429731515,-97.92880716960055zM-53.73878539966556,-69.97883225326507L-51.019370009544005,-59.26899769567506L-49.697566123406816,-68.5833108197236zM-47.0292472080988,-57.846372615776005L-42.69963108204101,-56.71056478810292L-45.30960998649598,-67.47403516084721zM1.069483227101211,-71.71762691824954L5.896481158046902,-73.6884802821516L-19.130582429731515,-97.92880716960055zM16.327931168564355,-67.36327602366562L20.10539135006583,-69.96611787649282L18.506337614886707,-80.91957209487846zM-30.540315435056915,-66.00611720873036L-25.26244401452375,-66.16496820724261L-19.130582429731515,-97.92880716960055zM-3.9831260317115267,-70.00936380196565L1.069483227101211,-71.71762691824954L-19.130582429731515,-97.92880716960055zM-25.26244401452375,-66.16496820724261L-19.90560925643584,-66.65143212949255L-19.130582429731515,-97.92880716960055zM-9.203683209278116,-68.58472175586826L-3.9831260317115267,-70.00936380196565L-19.130582429731515,-97.92880716960055zM-19.90560925643584,-66.65143212949255L-14.531838647173501,-67.4609980756825L-19.130582429731515,-97.92880716960055zM-14.531838647173501,-67.4609980756825L-9.203683209278116,-68.58472175586826L-19.130582429731515,-97.92880716960055z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/><path d=\"M18.506337614886707,-80.91957209487846L20.10539135006583,-69.96611787649282L21.938444279722916,-83.67175836096341z\" style=\"fill:rgb(220,20,60);fill-opacity:1\"/><path d=\"M-42.69963108204101,-56.71056478810292L-38.074990842139435,-55.87787357030771L-40.61999735728767,-66.6670848961667zM-49.697566123406816,-68.5833108197236L-47.0292472080988,-57.846372615776005L-45.30960998649598,-67.47403516084721zM12.182301504433111,-64.94524224378834L16.327931168564355,-67.36327602366562L14.661902073464567,-78.31777577618804zM-38.074990842139435,-55.87787357030771L-33.20464001169502,-55.360996286200006L-35.67878555390173,-66.17493157310844zM14.661902073464567,-78.31777577618804L16.327931168564355,-67.36327602366562L18.506337614886707,-80.91957209487846zM7.712083745382275,-62.741398279848276L12.182301504433111,-64.94524224378834L10.443812317945309,-75.89758761019199zM-45.30960998649598,-67.47403516084721L-42.69963108204101,-56.71056478810292L-40.61999735728767,-66.6670848961667zM-33.20464001169502,-55.360996286200006L-28.14205462457001,-55.168706449614L-30.540315435056915,-66.00611720873036zM2.965913451879308,-60.778788298811975L7.712083745382275,-62.741398279848276L5.896481158046902,-73.6884802821516zM10.443812317945309,-75.89758761019199L12.182301504433111,-64.94524224378834L14.661902073464567,-78.31777577618804zM-40.61999735728767,-66.6670848961667L-38.074990842139435,-55.87787357030771L-35.67878555390173,-66.17493157310844zM-28.14205462457001,-55.168706449614L-22.94412100320084,-55.305566572051525L-25.26244401452375,-66.16496820724261zM-2.0031839414047763,-59.08158671493571L2.965913451879308,-60.778788298811975L1.069483227101211,-71.71762691824954zM-22.94412100320084,-55.305566572051525L-17.67022089149591,-55.771762886993166L-19.90560925643584,-66.65143212949255zM-7.138644441072652,-57.67063564999052L-2.0031839414047763,-59.08158671493571L-3.9831260317115267,-70.00936380196565zM5.896481158046902,-73.6884802821516L7.712083745382275,-62.741398279848276L10.443812317945309,-75.89758761019199zM-17.67022089149591,-55.771762886993166L-12.381263279298459,-56.563022744398545L-14.531838647173501,-67.4609980756825zM-12.381263279298459,-56.563022744398545L-7.138644441072652,-57.67063564999052L-9.203683209278116,-68.58472175586826zM-35.67878555390173,-66.17493157310844L-33.20464001169502,-55.360996286200006L-30.540315435056915,-66.00611720873036zM1.069483227101211,-71.71762691824954L2.965913451879308,-60.778788298811975L5.896481158046902,-73.6884802821516zM-30.540315435056915,-66.00611720873036L-28.14205462457001,-55.168706449614L-25.26244401452375,-66.16496820724261zM-3.9831260317115267,-70.00936380196565L-2.0031839414047763,-59.08158671493571L1.069483227101211,-71.71762691824954zM-25.26244401452375,-66.16496820724261L-22.94412100320084,-55.305566572051525L-19.90560925643584,-66.65143212949255zM-9.203683209278116,-68.58472175586826L-7.138644441072652,-57.67063564999052L-3.9831260317115267,-70.00936380196565zM-19.90560925643584,-66.65143212949255L-17.67022089149591,-55.771762886993166L-14.531838647173501,-67.4609980756825zM-14.531838647173501,-67.4609980756825L-12.381263279298459,-56.563022744398545L-9.203683209278116,-68.58472175586826z\" style=\"fill:rgb(100,149,237);fill-opacity:1\"/></svg>\n                  </template>\n                  <template v-slot:prepend>\n                    {{ stateVariable.symbol }} <sub v-if = \"stateVariable.subscript\">{{stateVariable.subscript}}</sub> :\n                  </template>\n                </v-slider>                \n              </v-card-text>\n            </v-card>\n\n            <v-container>\n              <v-row>\n                <v-col>\n                  <v-btn \n                        block\n                        variant=\"outlined\" \n                        @click=\"runSolver(\n                          this.solverParameters.t0.value,\n                          [this.computedState.theta, this.computedState.phi, this.computedState.psi, this.computedState.pTheta, this.computedState.pPhi, this.computedState.pPsi],\n                          this.solverParameters.numSteps.value\n                        )\"\n                      >\n                        START\n                      </v-btn>\n                </v-col>\n                <v-col>\n                  <v-btn\n                        block\n                        variant=\"outlined\" \n                        @click=\"isSolving = false\"\n                      >\n                    STOP\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </v-container>\n\n          </v-col>\n\n          <v-col cols=\"8\">\n            <v-sheet rounded=\"lg\">\n              <gyroscopeSimulator :solution=\"solution\" :parameters=\"parameters\" :state=\"computedState\" :isSolving = \"isSolving\"></gyroscopeSimulator>\n            </v-sheet>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\n// import { pushScopeId } from 'vue'\nimport gyroscopeSimulator from './components/gyroscopeSimulator'\n// import _ from 'lodash'\n// import { popScopeId } from 'vue'\n// import { ref, onMounted } from 'vue'\n\n  export default {\n    name: 'app',\n    components: {\n      gyroscopeSimulator\n    },\n    data: () => ({\n      parameters : {\n        \"l\" : {value: 5, min: 1, max: 10, symbol: 'l'},\n        \"a\" : {value: 2, min: 1, max: 5, symbol: 'a'},\n        \"h\" : {value: 0.5, min: 0.1, max: 1, symbol: 'h'},\n        \"g\" : {value: 9.8, min: 0, max: 10, symbol : 'g'},\n      },\n      solverParameters : {\n          \"stepSize\" : {value: 1/240},\n          \"numSteps\" : {value: 240 * 5}, // total animation time in seconds is stepSize * numSteps\n          't0' : {value: 0}\n      },\n      animationParameters : {\n          \"rstride\" : 15,\n          \"cstride\" : 5,\n          \"nSample\" : 45,\n          \"dpi\" : 300,\n          \"transparency\" : 0.8\n      },\n      initialState : {\n          \"theta\" : {value: 0, min: 0, max: 6.28, symbol: 'ùõâ'},\n          \"phi\" : {value: 0.2, min: 0.01, max: 6.28, symbol: 'ùúô'},\n          \"psi\" : {value: 0, min: 0, max: 6.28, symbol: 'ùõô'},\n          \"thetaVel\": {value: 0, min: 0, max: 12, symbol: 'œâ', subscript: 'ùõâ'},\n          \"phiVel\": {value: 0, min: 0, max: 12, symbol: 'œâ', subscript: 'ùúô'},\n          \"psiVel\": {value: 0, min: 0, max: 100, symbol: 'œâ', subscript: 'ùõô'}\n      },\n      solution: [],\n      isSolving : false, // boolean to track whether or not simulation is running.\n      lastSolverStep : null // saves last solver step for use in generating continuous solution\n    }),\n    computed : {\n      computedState() {\n        let state = {... this.initialState}\n        for(let key in state){\n          state[key] = state[key].value\n        }\n        Object.assign(state, this.getCartesian(state.theta, state.phi))\n        Object.assign(state, this.getGeneralizedMomenta())\n        return state\n      }\n    },\n    watch: {\n    solution: {\n      handler(newValue) {\n        //let throttleSolver = _.throttle(this.runSolver(this.lastSolverStep['t0'], this.lastSolverStep['state'], false), 1000)\n        if(newValue.length < this.solverParameters.numSteps.value / 2 && this.isSolving == true){\n          this.runSolver(this.lastSolverStep['t0'], this.lastSolverStep['state'], this.solverParameters.numSteps.value / 10, false)\n          console.log(\"RECOMPUTING\")\n          console.log(\"Len of array is : \" + newValue.length )\n        }\n      },\n      deep: true\n    }\n    },\n    methods : {\n      gyroscope(t, stateVector) { // returns dstateVector/dt\n          let [theta, phi, psi, pTheta, pPhi, pPsi] = stateVector\n\n          // DON'T ANGER THE LINTER\n          theta = psi\n          psi = theta\n          \n          let phiVel = pPhi / this.parameters.l.value**2 \n          let thetaVel = (pTheta - (pPsi * Math.cos(phi)))/(this.parameters.l.value**2 * Math.sin(phi)**2) \n          let psiVel = (pPsi/(this.parameters.a.value**2/4)) - thetaVel * Math.cos(phi) \n\n          let pThetaDot = 0 \n          let pPhiDot = (this.parameters.l.value**2 + (this.parameters.a.value**2/4))* Math.sin(phi) * Math.cos(phi) * thetaVel**2 + (this.parameters.g.value*this.parameters.l.value - (this.parameters.a.value**2/4) * psiVel * thetaVel) * Math.sin(phi)\n          let pPsiDot = 0\n\n          return [thetaVel, phiVel, psiVel, pThetaDot, pPhiDot, pPsiDot];\n      },\n      rungeKutta(engine, state, t0, stepSize, numSteps) {\n          // Helper functions for rungeKutta solver\n          function numericAdd(a, b) {\n            return a.map((ai, i) => ai + b[i]);\n          }\n          function numericMul(scalar, vector) {\n              return vector.map(vi => scalar * vi);\n          }\n\n          // Variable Instantiation\n          const result = [];\n          result.push({ t: t0, state: state });\n\n          // Solve\n          for (let i = 1; i <= numSteps; i++) {\n              const t = t0 + i * stepSize;\n              const k1 = numericMul(stepSize, engine(t0, state));\n              const k2 = numericMul(stepSize, engine(t0 + stepSize / 2, numericAdd(state, numericMul(0.5, k1))));\n              const k3 = numericMul(stepSize, engine(t0 + stepSize / 2, numericAdd(state, numericMul(0.5, k2))));\n              const k4 = numericMul(stepSize, engine(t0 + stepSize, numericAdd(state, k3)));\n\n              state = numericAdd(state, numericMul(1 / 6, numericAdd(k1, numericAdd(numericMul(2, k2), numericAdd(numericMul(2, k3), k4)))));\n              t0 = t;\n              result.push({ t, state: state });\n          }\n          return result;\n      },\n      updateSolution(solution){\n        for(let elem of solution){\n          let entry = {\n            theta : elem.state[0],\n            phi : elem.state[1],\n            psi : elem.state[2],\n            ... this.getCartesian(elem.state[0], elem.state[1])\n          }\n          this.solution.push(entry)\n        }\n      },\n      runSolver(t0, stateVector, numSteps, clearSolution = true){\n        if(clearSolution == true){\n          this.solution = []\n        }\n\n        this.isSolving = true\n        let solution = this.rungeKutta(\n          this.gyroscope,\n          stateVector,\n          t0,\n          this.solverParameters.stepSize.value,\n          numSteps\n        )\n\n        this.lastSolverStep = solution[solution.length - 1]\n        this.updateSolution(solution)\n      },\n      getCartesian(theta, phi){// return cartesian coordinates from theta, phi, and psi\n          let x = this.parameters.l.value * Math.cos(theta) * Math.sin(phi)\n          let y = this.parameters.l.value * Math.sin(theta) * Math.sin(phi)\n          let z = this.parameters.l.value * Math.cos(phi)\n\n          return {x:x, y:y, z:z}\n      },\n      getGeneralizedMomenta(){\n        let pTheta = (this.parameters.l.value**2 * Math.sin(this.initialState.phi.value)**2 + (this.parameters.a.value**2/4) * Math.cos(this.initialState.phi.value)**2)*this.initialState.thetaVel.value + (this.parameters.a.value**2/4) * this.initialState.psiVel.value * Math.cos(this.initialState.phi.value)\n        let pPhi = this.parameters.l.value**2 * this.initialState.phiVel.value\n        let pPsi = (this.parameters.a.value**2/4) * (this.initialState.thetaVel.value * Math.cos(this.initialState.phi.value) + this.initialState.psiVel.value)\n\n        return {pTheta:pTheta, pPhi:pPhi, pPsi:pPsi}\n      }\n    }\n  }\n</script>\n\n<style>\n#app{\n  width: 100%;\n  height: 100%;\n  font-family: NotoSansMath-Regular\n}\n\n@font-face {\n    font-family: NotoSansMath-Regular;\n    src: url('~@/assets/fonts/NotoSansMath-Regular.ttf');\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}