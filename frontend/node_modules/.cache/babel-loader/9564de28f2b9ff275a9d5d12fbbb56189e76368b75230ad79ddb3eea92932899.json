{"ast":null,"code":"import ChainMap from './ChainMap.js';\nimport RenderContext from './RenderContext.js';\nclass RenderContexts {\n  constructor() {\n    this.chainMaps = {};\n  }\n  get(scene, camera, renderTarget = null) {\n    const chainKey = [scene, camera];\n    let attachmentState;\n    if (renderTarget === null) {\n      attachmentState = 'default';\n    } else {\n      let format, count;\n      if (renderTarget.isWebGLMultipleRenderTargets) {\n        format = renderTarget.texture[0].format;\n        count = renderTarget.texture.length;\n      } else {\n        format = renderTarget.texture.format;\n        count = 1;\n      }\n      attachmentState = `${count}:${format}:${renderTarget.samples}:${renderTarget.depthBuffer}:${renderTarget.stencilBuffer}`;\n    }\n    const chainMap = this.getChainMap(attachmentState);\n    let renderState = chainMap.get(chainKey);\n    if (renderState === undefined) {\n      renderState = new RenderContext();\n      chainMap.set(chainKey, renderState);\n    }\n    if (renderTarget !== null) renderState.sampleCount = renderTarget.samples === 0 ? 1 : renderTarget.samples;\n    return renderState;\n  }\n  getChainMap(attachmentState) {\n    return this.chainMaps[attachmentState] || (this.chainMaps[attachmentState] = new ChainMap());\n  }\n  dispose() {\n    this.chainMaps = {};\n  }\n}\nexport default RenderContexts;","map":{"version":3,"names":["ChainMap","RenderContext","RenderContexts","constructor","chainMaps","get","scene","camera","renderTarget","chainKey","attachmentState","format","count","isWebGLMultipleRenderTargets","texture","length","samples","depthBuffer","stencilBuffer","chainMap","getChainMap","renderState","undefined","set","sampleCount","dispose"],"sources":["/Users/cabrera/Documents/GyroscopeVisualizer/frontend/node_modules/three/examples/jsm/renderers/common/RenderContexts.js"],"sourcesContent":["import ChainMap from './ChainMap.js';\nimport RenderContext from './RenderContext.js';\n\nclass RenderContexts {\n\n\tconstructor() {\n\n\t\tthis.chainMaps = {};\n\n\t}\n\n\tget( scene, camera, renderTarget = null ) {\n\n\t\tconst chainKey = [ scene, camera ];\n\n\t\tlet attachmentState;\n\n\t\tif ( renderTarget === null ) {\n\n\t\t\tattachmentState = 'default';\n\n\t\t} else {\n\n\t\t\tlet format, count;\n\n\t\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\t\tformat = renderTarget.texture[ 0 ].format;\n\t\t\t\tcount = renderTarget.texture.length;\n\n\t\t\t} else {\n\n\t\t\t\tformat = renderTarget.texture.format;\n\t\t\t\tcount = 1;\n\n\t\t\t}\n\n\t\t\tattachmentState = `${count}:${format}:${renderTarget.samples}:${renderTarget.depthBuffer}:${renderTarget.stencilBuffer}`;\n\n\t\t}\n\n\t\tconst chainMap = this.getChainMap( attachmentState );\n\n\t\tlet renderState = chainMap.get( chainKey );\n\n\t\tif ( renderState === undefined ) {\n\n\t\t\trenderState = new RenderContext();\n\n\t\t\tchainMap.set( chainKey, renderState );\n\n\t\t}\n\n\t\tif ( renderTarget !== null ) renderState.sampleCount = renderTarget.samples === 0 ? 1 : renderTarget.samples;\n\n\t\treturn renderState;\n\n\t}\n\n\tgetChainMap( attachmentState ) {\n\n\t\treturn this.chainMaps[ attachmentState ] || ( this.chainMaps[ attachmentState ] = new ChainMap() );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.chainMaps = {};\n\n\t}\n\n}\n\nexport default RenderContexts;\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,eAAe;AACpC,OAAOC,aAAa,MAAM,oBAAoB;AAE9C,MAAMC,cAAc,CAAC;EAEpBC,WAAWA,CAAA,EAAG;IAEb,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC;EAEpB;EAEAC,GAAGA,CAAEC,KAAK,EAAEC,MAAM,EAAEC,YAAY,GAAG,IAAI,EAAG;IAEzC,MAAMC,QAAQ,GAAG,CAAEH,KAAK,EAAEC,MAAM,CAAE;IAElC,IAAIG,eAAe;IAEnB,IAAKF,YAAY,KAAK,IAAI,EAAG;MAE5BE,eAAe,GAAG,SAAS;IAE5B,CAAC,MAAM;MAEN,IAAIC,MAAM,EAAEC,KAAK;MAEjB,IAAKJ,YAAY,CAACK,4BAA4B,EAAG;QAEhDF,MAAM,GAAGH,YAAY,CAACM,OAAO,CAAE,CAAC,CAAE,CAACH,MAAM;QACzCC,KAAK,GAAGJ,YAAY,CAACM,OAAO,CAACC,MAAM;MAEpC,CAAC,MAAM;QAENJ,MAAM,GAAGH,YAAY,CAACM,OAAO,CAACH,MAAM;QACpCC,KAAK,GAAG,CAAC;MAEV;MAEAF,eAAe,GAAI,GAAEE,KAAM,IAAGD,MAAO,IAAGH,YAAY,CAACQ,OAAQ,IAAGR,YAAY,CAACS,WAAY,IAAGT,YAAY,CAACU,aAAc,EAAC;IAEzH;IAEA,MAAMC,QAAQ,GAAG,IAAI,CAACC,WAAW,CAAEV,eAAgB,CAAC;IAEpD,IAAIW,WAAW,GAAGF,QAAQ,CAACd,GAAG,CAAEI,QAAS,CAAC;IAE1C,IAAKY,WAAW,KAAKC,SAAS,EAAG;MAEhCD,WAAW,GAAG,IAAIpB,aAAa,CAAC,CAAC;MAEjCkB,QAAQ,CAACI,GAAG,CAAEd,QAAQ,EAAEY,WAAY,CAAC;IAEtC;IAEA,IAAKb,YAAY,KAAK,IAAI,EAAGa,WAAW,CAACG,WAAW,GAAGhB,YAAY,CAACQ,OAAO,KAAK,CAAC,GAAG,CAAC,GAAGR,YAAY,CAACQ,OAAO;IAE5G,OAAOK,WAAW;EAEnB;EAEAD,WAAWA,CAAEV,eAAe,EAAG;IAE9B,OAAO,IAAI,CAACN,SAAS,CAAEM,eAAe,CAAE,KAAM,IAAI,CAACN,SAAS,CAAEM,eAAe,CAAE,GAAG,IAAIV,QAAQ,CAAC,CAAC,CAAE;EAEnG;EAEAyB,OAAOA,CAAA,EAAG;IAET,IAAI,CAACrB,SAAS,GAAG,CAAC,CAAC;EAEpB;AAED;AAEA,eAAeF,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}