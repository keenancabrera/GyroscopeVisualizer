{"ast":null,"code":"import AnalyticLightNode from './AnalyticLightNode.js';\nimport { addLightNode } from './LightsNode.js';\nimport { getDistanceAttenuation } from './LightUtils.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { objectViewPosition } from '../accessors/Object3DNode.js';\nimport { positionView } from '../accessors/PositionNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { PointLight } from 'three';\nclass PointLightNode extends AnalyticLightNode {\n  constructor(light = null) {\n    super(light);\n    this.cutoffDistanceNode = uniform(0);\n    this.decayExponentNode = uniform(0);\n  }\n  update(frame) {\n    const {\n      light\n    } = this;\n    super.update(frame);\n    this.cutoffDistanceNode.value = light.distance;\n    this.decayExponentNode.value = light.decay;\n  }\n  setup(builder) {\n    const {\n      colorNode,\n      cutoffDistanceNode,\n      decayExponentNode,\n      light\n    } = this;\n    const lightingModel = builder.context.lightingModel;\n    const lVector = objectViewPosition(light).sub(positionView); // @TODO: Add it into LightNode\n\n    const lightDirection = lVector.normalize();\n    const lightDistance = lVector.length();\n    const lightAttenuation = getDistanceAttenuation({\n      lightDistance,\n      cutoffDistance: cutoffDistanceNode,\n      decayExponent: decayExponentNode\n    });\n    const lightColor = colorNode.mul(lightAttenuation);\n    const reflectedLight = builder.context.reflectedLight;\n    lightingModel.direct({\n      lightDirection,\n      lightColor,\n      reflectedLight\n    });\n  }\n}\nexport default PointLightNode;\naddNodeClass('PointLightNode', PointLightNode);\naddLightNode(PointLight, PointLightNode);","map":{"version":3,"names":["AnalyticLightNode","addLightNode","getDistanceAttenuation","uniform","objectViewPosition","positionView","addNodeClass","PointLight","PointLightNode","constructor","light","cutoffDistanceNode","decayExponentNode","update","frame","value","distance","decay","setup","builder","colorNode","lightingModel","context","lVector","sub","lightDirection","normalize","lightDistance","length","lightAttenuation","cutoffDistance","decayExponent","lightColor","mul","reflectedLight","direct"],"sources":["/Users/cabrera/Documents/GyroscopeVisualizer/frontend/node_modules/three/examples/jsm/nodes/lighting/PointLightNode.js"],"sourcesContent":["import AnalyticLightNode from './AnalyticLightNode.js';\nimport { addLightNode } from './LightsNode.js';\nimport { getDistanceAttenuation } from './LightUtils.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { objectViewPosition } from '../accessors/Object3DNode.js';\nimport { positionView } from '../accessors/PositionNode.js';\nimport { addNodeClass } from '../core/Node.js';\n\nimport { PointLight } from 'three';\n\nclass PointLightNode extends AnalyticLightNode {\n\n\tconstructor( light = null ) {\n\n\t\tsuper( light );\n\n\t\tthis.cutoffDistanceNode = uniform( 0 );\n\t\tthis.decayExponentNode = uniform( 0 );\n\n\t}\n\n\tupdate( frame ) {\n\n\t\tconst { light } = this;\n\n\t\tsuper.update( frame );\n\n\t\tthis.cutoffDistanceNode.value = light.distance;\n\t\tthis.decayExponentNode.value = light.decay;\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tconst { colorNode, cutoffDistanceNode, decayExponentNode, light } = this;\n\n\t\tconst lightingModel = builder.context.lightingModel;\n\n\t\tconst lVector = objectViewPosition( light ).sub( positionView ); // @TODO: Add it into LightNode\n\n\t\tconst lightDirection = lVector.normalize();\n\t\tconst lightDistance = lVector.length();\n\n\t\tconst lightAttenuation = getDistanceAttenuation( {\n\t\t\tlightDistance,\n\t\t\tcutoffDistance: cutoffDistanceNode,\n\t\t\tdecayExponent: decayExponentNode\n\t\t} );\n\n\t\tconst lightColor = colorNode.mul( lightAttenuation );\n\n\t\tconst reflectedLight = builder.context.reflectedLight;\n\n\t\tlightingModel.direct( {\n\t\t\tlightDirection,\n\t\t\tlightColor,\n\t\t\treflectedLight\n\t\t} );\n\n\t}\n\n}\n\nexport default PointLightNode;\n\naddNodeClass( 'PointLightNode', PointLightNode );\n\naddLightNode( PointLight, PointLightNode );\n"],"mappings":"AAAA,OAAOA,iBAAiB,MAAM,wBAAwB;AACtD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,sBAAsB,QAAQ,iBAAiB;AACxD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,kBAAkB,QAAQ,8BAA8B;AACjE,SAASC,YAAY,QAAQ,8BAA8B;AAC3D,SAASC,YAAY,QAAQ,iBAAiB;AAE9C,SAASC,UAAU,QAAQ,OAAO;AAElC,MAAMC,cAAc,SAASR,iBAAiB,CAAC;EAE9CS,WAAWA,CAAEC,KAAK,GAAG,IAAI,EAAG;IAE3B,KAAK,CAAEA,KAAM,CAAC;IAEd,IAAI,CAACC,kBAAkB,GAAGR,OAAO,CAAE,CAAE,CAAC;IACtC,IAAI,CAACS,iBAAiB,GAAGT,OAAO,CAAE,CAAE,CAAC;EAEtC;EAEAU,MAAMA,CAAEC,KAAK,EAAG;IAEf,MAAM;MAAEJ;IAAM,CAAC,GAAG,IAAI;IAEtB,KAAK,CAACG,MAAM,CAAEC,KAAM,CAAC;IAErB,IAAI,CAACH,kBAAkB,CAACI,KAAK,GAAGL,KAAK,CAACM,QAAQ;IAC9C,IAAI,CAACJ,iBAAiB,CAACG,KAAK,GAAGL,KAAK,CAACO,KAAK;EAE3C;EAEAC,KAAKA,CAAEC,OAAO,EAAG;IAEhB,MAAM;MAAEC,SAAS;MAAET,kBAAkB;MAAEC,iBAAiB;MAAEF;IAAM,CAAC,GAAG,IAAI;IAExE,MAAMW,aAAa,GAAGF,OAAO,CAACG,OAAO,CAACD,aAAa;IAEnD,MAAME,OAAO,GAAGnB,kBAAkB,CAAEM,KAAM,CAAC,CAACc,GAAG,CAAEnB,YAAa,CAAC,CAAC,CAAC;;IAEjE,MAAMoB,cAAc,GAAGF,OAAO,CAACG,SAAS,CAAC,CAAC;IAC1C,MAAMC,aAAa,GAAGJ,OAAO,CAACK,MAAM,CAAC,CAAC;IAEtC,MAAMC,gBAAgB,GAAG3B,sBAAsB,CAAE;MAChDyB,aAAa;MACbG,cAAc,EAAEnB,kBAAkB;MAClCoB,aAAa,EAAEnB;IAChB,CAAE,CAAC;IAEH,MAAMoB,UAAU,GAAGZ,SAAS,CAACa,GAAG,CAAEJ,gBAAiB,CAAC;IAEpD,MAAMK,cAAc,GAAGf,OAAO,CAACG,OAAO,CAACY,cAAc;IAErDb,aAAa,CAACc,MAAM,CAAE;MACrBV,cAAc;MACdO,UAAU;MACVE;IACD,CAAE,CAAC;EAEJ;AAED;AAEA,eAAe1B,cAAc;AAE7BF,YAAY,CAAE,gBAAgB,EAAEE,cAAe,CAAC;AAEhDP,YAAY,CAAEM,UAAU,EAAEC,cAAe,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}