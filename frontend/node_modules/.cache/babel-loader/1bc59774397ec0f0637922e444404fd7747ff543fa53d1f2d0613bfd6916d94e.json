{"ast":null,"code":"import ChainMap from './ChainMap.js';\nimport RenderObject from './RenderObject.js';\nclass RenderObjects {\n  constructor(renderer, nodes, geometries, pipelines, bindings, info) {\n    this.renderer = renderer;\n    this.nodes = nodes;\n    this.geometries = geometries;\n    this.pipelines = pipelines;\n    this.bindings = bindings;\n    this.info = info;\n    this.chainMaps = {};\n  }\n  get(object, material, scene, camera, lightsNode, renderContext, passId) {\n    const chainMap = this.getChainMap(passId);\n    const chainArray = [object, material, renderContext, lightsNode];\n    let renderObject = chainMap.get(chainArray);\n    if (renderObject === undefined) {\n      renderObject = this.createRenderObject(this.nodes, this.geometries, this.renderer, object, material, scene, camera, lightsNode, renderContext, passId);\n      chainMap.set(chainArray, renderObject);\n    } else {\n      if (renderObject.version !== material.version) {\n        renderObject.version = material.version;\n        if (renderObject.initialCacheKey !== renderObject.getCacheKey()) {\n          renderObject.dispose();\n          renderObject = this.get(object, material, scene, camera, lightsNode, renderContext, passId);\n        }\n      }\n    }\n    return renderObject;\n  }\n  getChainMap(passId = 'default') {\n    return this.chainMaps[passId] || (this.chainMaps[passId] = new ChainMap());\n  }\n  dispose() {\n    this.chainMaps = {};\n  }\n  createRenderObject(nodes, geometries, renderer, object, material, scene, camera, lightsNode, renderContext, passId) {\n    const chainMap = this.getChainMap(passId);\n    const renderObject = new RenderObject(nodes, geometries, renderer, object, material, scene, camera, lightsNode, renderContext);\n    renderObject.onDispose = () => {\n      this.pipelines.delete(renderObject);\n      this.bindings.delete(renderObject);\n      this.nodes.delete(renderObject);\n      chainMap.delete(renderObject.getChainArray());\n    };\n    return renderObject;\n  }\n}\nexport default RenderObjects;","map":{"version":3,"names":["ChainMap","RenderObject","RenderObjects","constructor","renderer","nodes","geometries","pipelines","bindings","info","chainMaps","get","object","material","scene","camera","lightsNode","renderContext","passId","chainMap","getChainMap","chainArray","renderObject","undefined","createRenderObject","set","version","initialCacheKey","getCacheKey","dispose","onDispose","delete","getChainArray"],"sources":["/Users/cabrera/Documents/GyroscopeVisualizer/frontend/node_modules/three/examples/jsm/renderers/common/RenderObjects.js"],"sourcesContent":["import ChainMap from './ChainMap.js';\nimport RenderObject from './RenderObject.js';\n\nclass RenderObjects {\n\n\tconstructor( renderer, nodes, geometries, pipelines, bindings, info ) {\n\n\t\tthis.renderer = renderer;\n\t\tthis.nodes = nodes;\n\t\tthis.geometries = geometries;\n\t\tthis.pipelines = pipelines;\n\t\tthis.bindings = bindings;\n\t\tthis.info = info;\n\n\t\tthis.chainMaps = {};\n\n\t}\n\n\tget( object, material, scene, camera, lightsNode, renderContext, passId ) {\n\n\t\tconst chainMap = this.getChainMap( passId );\n\t\tconst chainArray = [ object, material, renderContext, lightsNode ];\n\n\t\tlet renderObject = chainMap.get( chainArray );\n\n\t\tif ( renderObject === undefined ) {\n\n\t\t\trenderObject = this.createRenderObject( this.nodes, this.geometries, this.renderer, object, material, scene, camera, lightsNode, renderContext, passId );\n\n\t\t\tchainMap.set( chainArray, renderObject );\n\n\t\t} else {\n\n\t\t\tif ( renderObject.version !== material.version ) {\n\n\t\t\t\trenderObject.version = material.version;\n\n\t\t\t\tif ( renderObject.initialCacheKey !== renderObject.getCacheKey() ) {\n\n\t\t\t\t\trenderObject.dispose();\n\n\t\t\t\t\trenderObject = this.get( object, material, scene, camera, lightsNode, renderContext, passId );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderObject;\n\n\t}\n\n\tgetChainMap( passId = 'default' ) {\n\n\t\treturn this.chainMaps[ passId ] || ( this.chainMaps[ passId ] = new ChainMap() );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.chainMaps = {};\n\n\t}\n\n\tcreateRenderObject( nodes, geometries, renderer, object, material, scene, camera, lightsNode, renderContext, passId ) {\n\n\t\tconst chainMap = this.getChainMap( passId );\n\n\t\tconst renderObject = new RenderObject( nodes, geometries, renderer, object, material, scene, camera, lightsNode, renderContext );\n\n\t\trenderObject.onDispose = () => {\n\n\t\t\tthis.pipelines.delete( renderObject );\n\t\t\tthis.bindings.delete( renderObject );\n\t\t\tthis.nodes.delete( renderObject );\n\n\t\t\tchainMap.delete( renderObject.getChainArray() );\n\n\t\t};\n\n\t\treturn renderObject;\n\n\t}\n\n\n}\n\nexport default RenderObjects;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}