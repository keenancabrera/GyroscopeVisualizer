(function(){"use strict";var t={8395:function(t,e,a){var s=a(9242),i=a(3396),r=a(7139);const n={key:0};function l(t,e,a,s,l,o){const u=(0,i.up)("v-card-title"),h=(0,i.up)("v-card-subtitle"),c=(0,i.up)("v-card-item"),m=(0,i.up)("v-slider"),d=(0,i.up)("v-card-text"),p=(0,i.up)("v-card"),v=(0,i.up)("v-btn"),f=(0,i.up)("v-col"),w=(0,i.up)("v-row"),g=(0,i.up)("v-container"),S=(0,i.up)("gyroscopeSimulator"),b=(0,i.up)("v-sheet"),y=(0,i.up)("v-main"),P=(0,i.up)("v-app");return(0,i.wg)(),(0,i.j4)(P,{id:"gyro"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{class:"bg-grey-lighten-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{fluid:!0,class:"ma-0 pa-2 v-flex full-width"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{cols:"4"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{rounded:"lg"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"mb-5"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Parameters")])),_:1}),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Set dimensions of gyroscope and strength of gravity")])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.parameters,((t,e)=>((0,i.wg)(),(0,i.j4)(m,{min:t.min,max:t.max,"thumb-label":"always",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,key:e,class:"mt-2"},{prepend:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.symbol)+" : ",1)])),_:2},1032,["min","max","modelValue","onUpdate:modelValue"])))),128))])),_:1})])),_:1}),(0,i.Wm)(p,{rounded:"lg",class:"mt-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"mb-5"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Initial State")])),_:1}),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Set initial state of gyroscope")])),_:1})])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.initialState,((t,e)=>((0,i.wg)(),(0,i.j4)(m,{min:t.min,max:t.max,"thumb-label":"always",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,key:e,class:"mt-2"},{prepend:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.symbol)+" ",1),t.subscript?((0,i.wg)(),(0,i.iD)("sub",n,(0,r.zw)(t.subscript),1)):(0,i.kq)("",!0),(0,i.Uk)(" : ")])),_:2},1032,["min","max","modelValue","onUpdate:modelValue"])))),128))])),_:1})])),_:1}),(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{block:"",color:"green",variant:"outlined",onClick:e[0]||(e[0]=t=>o.runSolver(this.solverParameters.t0.value,[this.computedState.theta,this.computedState.phi,this.computedState.psi,this.computedState.pTheta,this.computedState.pPhi,this.computedState.pPsi],this.solverParameters.numSteps.value))},{default:(0,i.w5)((()=>[(0,i.Uk)(" START ")])),_:1})])),_:1}),(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{block:"",color:"red",variant:"outlined",onClick:e[1]||(e[1]=e=>t.isSolving=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)(" STOP ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.Wm)(f,{cols:"8"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{rounded:"lg"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{solution:t.solution,parameters:t.parameters,state:o.computedState,isSolving:t.isSolving},null,8,["solution","parameters","state","isSolving"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}a(560);const o={ref:"sceneContainer",class:"scene-container"};function u(t,e,a,s,r,n){return(0,i.wg)(),(0,i.iD)("div",o,null,512)}var h=a(1114);function c(t,e){const a=new h.cPb(75,t.clientWidth/t.clientHeight,.1,1e3);return a.up.set(0,0,1),a.position.set(1.5*e.l.max,1.5*e.l.max,1.5*e.l.max),a.lookAt(0,0,0),a}class m{constructor(t,e,a,s){this.thetaStart=a,this.oldPsi=t.psi,this.parameters=e,this.oldPosition=new h.Pa4;let i=new h.fHI(e.a.value,e.a.value,e.h.value,32,1,!1,a,Math.PI),r=new h.YBo({color:s});this.cylinder=new h.Kj0(i,r),this.cylinder.castShadow=!0,this.cylinder.rotation.set(Math.PI/2,0,0),this.cylinder.position.set(0,0,this.parameters.l.value),this.cylinder.getWorldPosition(this.oldPosition),this.tick(t)}get object(){return this.cylinder}changeParameters(t){let e=new h.fHI(t.a.value,t.a.value,t.h.value,32,1,!1,this.thetaStart,Math.PI);this.cylinder.geometry.dispose(),this.cylinder.geometry=e}tick(t,e=!0){if(0==e)return void this.cylinder.position.set(t["x"],t["y"],t["z"]);let a=new h.Pa4(t["x"],t["y"],t["z"]),s=this.oldPosition.angleTo(a),i=a.clone().sub(this.oldPosition),r=(new h.Pa4).crossVectors(i,this.oldPosition);this.cylinder.position.set(t["x"],t["y"],t["z"]),this.cylinder.rotateOnWorldAxis(r.normalize(),-s),this.cylinder.rotateOnWorldAxis(a.normalize(),t["psi"]-this.oldPsi),this.oldPosition=a.clone(),this.oldPsi=t["psi"]}}function d(){const t=new h.xsS;return t.background=null,t}a(4224),a(1121),a(7133);class p{constructor(t,e){this.parameters=e,this.verticies=new Float32Array([0,0,0,t["x"]*(e.l.max/e.l.value),t["y"]*(e.l.max/e.l.value),t["z"]*(e.l.max/e.l.value)]);let a=new h.nls({color:"white",linewidth:1}),s=new h.u9r;this.rod=new h.x12(s,a),this.rod.geometry.setAttribute("position",new h.TlE(this.verticies,3))}get object(){return this.rod}tick(t){this.verticies[3]=t["x"]*(this.parameters.l.max/this.parameters.l.value),this.verticies[4]=t["y"]*(this.parameters.l.max/this.parameters.l.value),this.verticies[5]=t["z"]*(this.parameters.l.max/this.parameters.l.value),this.rod.geometry.setAttribute("position",new h.TlE(this.verticies,3))}}function v(t){let e=new h.PMe(16777215,1,0,Math.PI/5,0);e.position.set(0,0,2*t.l.max),e.castShadow=!0,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,e.shadow.camera.near=.1,e.shadow.camera.far=4*t.l.max;let a=new h.vmT("white","black",.2);return[e,a]}function f(t){let e=new h.zf8(3.1*t.l.max*Math.tan(Math.PI/5),500),a=new h.YBo({color:"gray",side:h.ehD});e.translate(0,0,1.1*-t.l.max);let s=new h.Kj0(e,a);return s.receiveShadow=!0,s}function w(){const t=new h.CP7;return t.useLegacyLights=!0,t.shadowMap.enabled=!0,t}const g=new h.SUY;class S{constructor(t,e,a,s,i){this.camera=t,this.scene=e,this.renderer=a,this.controls=s,this.updatables=[],this.solution=i,this.isPaused=!1,this.stepSize=1/240}start(t,e=!1){this.isPaused=e,g.getDelta(),this.renderer.setAnimationLoop((()=>{0==this.isPaused?this.tick():this.Pause(t),this.controls.update(),this.renderer.render(this.scene,this.camera)}))}Pause(t){this.isPaused=!0;for(const e of this.updatables)e.tick(t);this.renderer.render(this.scene,this.camera)}tick(){let t=g.getDelta();for(const e of this.updatables)e.tick(this.solution[0]);for(let e=0;e<=Math.round(t/this.stepSize);e++)this.solution.shift()}}var b=a(4543);function y(t,e){const a=new b.z(t,e);return a.enablePan=!1,a}const P=(t,e,a)=>{e.aspect=t.clientWidth/t.clientHeight,e.updateProjectionMatrix(),a.setSize(t.clientWidth,t.clientHeight),a.setPixelRatio(window.devicePixelRatio)};class x{constructor(t,e,a){P(t,e,a),window.addEventListener("resize",(()=>{P(t,e,a),this.onResize()}))}onResize(){}}let k,M,_,W,z;class j{constructor(t,e,a,s){this.parameters=e,this.state=a,k=c(t,this.parameters),_=d(),M=w(),M.setSize(t.clientWidth,t.clientHeight),M.setPixelRatio(window.devicePixelRatio),t.append(M.domElement);const i=new x(t,k,M);i.onResize=()=>{this.render()},z=y(k,M.domElement),z.listenToKeyEvents(t),W=new S(k,_,M,z,s),[this.spotLight,this.hemisphereLight]=v(this.parameters),this.floor=f(this.parameters),this.blueHalf=new m(this.state,e,0,"cornflowerblue"),this.redHalf=new m(this.state,e,Math.PI,"crimson"),this.rod=new p(this.state,this.parameters),W.updatables.push(this.blueHalf),W.updatables.push(this.redHalf),W.updatables.push(this.rod),_.add(this.blueHalf.object,this.redHalf.object,this.rod.object,this.spotLight,this.hemisphereLight,this.floor),W.start(this.state,!0)}render(){M.render(_,k)}updateSolution(t){W.solution=t,W.start(this.state)}updateParameters(t){this.parameters=t,this.blueHalf.changeParameters(this.parameters),this.redHalf.changeParameters(this.parameters),W.start(this.state,!0)}updateState(t){this.state=t,W.start(t,!0),this.blueHalf.tick(this.state),this.redHalf.tick(this.state),this.rod.tick(this.state)}pause(t){this.state=t,W.start(t,!0)}}var O={name:"gyroscopeSimulator",props:{solution:Object,parameters:Object,state:Object,isSolving:Boolean},watch:{solution:{handler(){this.gyroscopeAnimation.updateSolution(this.solution)},deep:!1,flush:"post"},parameters:{handler(){this.gyroscopeAnimation.updateParameters(this.parameters)},deep:!0},state:{handler(){this.gyroscopeAnimation.updateState(this.state)},deep:!0},isSolving:{handler(){0==this.isSolving&&this.gyroscopeAnimation.updateState(this.state)}}},data(){return{}},mounted(){this.gyroscopeAnimation=new j(this.$refs.sceneContainer,this.parameters,this.state,this.solution),this.gyroscopeAnimation.render()}},H=a(89);const V=(0,H.Z)(O,[["render",u],["__scopeId","data-v-107dcdd4"]]);var A=V,T={name:"app",components:{gyroscopeSimulator:A},data:()=>({parameters:{l:{value:5,min:1,max:10,symbol:"l"},a:{value:2,min:1,max:5,symbol:"a"},h:{value:.5,min:.1,max:1,symbol:"h"},g:{value:9.8,min:0,max:10,symbol:"g"}},solverParameters:{stepSize:{value:1/240},numSteps:{value:1200},t0:{value:0}},animationParameters:{rstride:15,cstride:5,nSample:45,dpi:300,transparency:.8},initialState:{theta:{value:0,min:0,max:6.28,symbol:"𝛉"},phi:{value:.2,min:.01,max:6.28,symbol:"𝜙"},psi:{value:0,min:0,max:6.28,symbol:"𝛙"},thetaVel:{value:0,min:0,max:12,symbol:"ω",subscript:"𝛉"},phiVel:{value:0,min:0,max:12,symbol:"ω",subscript:"𝜙"},psiVel:{value:0,min:0,max:100,symbol:"ω",subscript:"𝛙"}},solution:[],isSolving:!1,lastSolverStep:null}),computed:{computedState(){let t={...this.initialState};for(let e in t)t[e]=t[e].value;return Object.assign(t,this.getCartesian(t.theta,t.phi)),Object.assign(t,this.getGeneralizedMomenta()),t}},watch:{solution:{handler(t){t.length<this.solverParameters.numSteps.value/2&&1==this.isSolving&&this.runSolver(this.lastSolverStep["t0"],this.lastSolverStep["state"],this.solverParameters.numSteps.value/10,!1)},deep:!0}},methods:{gyroscope(t,e){let[a,s,i,r,n,l]=e;a=i,i=a;let o=n/this.parameters.l.value**2,u=(r-l*Math.cos(s))/(this.parameters.l.value**2*Math.sin(s)**2),h=l/(this.parameters.a.value**2/4)-u*Math.cos(s),c=0,m=(this.parameters.l.value**2+this.parameters.a.value**2/4)*Math.sin(s)*Math.cos(s)*u**2+(this.parameters.g.value*this.parameters.l.value-this.parameters.a.value**2/4*h*u)*Math.sin(s),d=0;return[u,o,h,c,m,d]},rungeKutta(t,e,a,s,i){function r(t,e){return t.map(((t,a)=>t+e[a]))}function n(t,e){return e.map((e=>t*e))}const l=[];l.push({t:a,state:e});for(let o=1;o<=i;o++){const i=a+o*s,u=n(s,t(a,e)),h=n(s,t(a+s/2,r(e,n(.5,u)))),c=n(s,t(a+s/2,r(e,n(.5,h)))),m=n(s,t(a+s,r(e,c)));e=r(e,n(1/6,r(u,r(n(2,h),r(n(2,c),m))))),a=i,l.push({t:i,state:e})}return l},updateSolution(t){for(let e of t){let t={theta:e.state[0],phi:e.state[1],psi:e.state[2],...this.getCartesian(e.state[0],e.state[1])};this.solution.push(t)}},runSolver(t,e,a,s=!0){1==s&&(this.solution=[]),this.isSolving=!0;let i=this.rungeKutta(this.gyroscope,e,t,this.solverParameters.stepSize.value,a);this.lastSolverStep=i[i.length-1],this.updateSolution(i)},getCartesian(t,e){let a=this.parameters.l.value*Math.cos(t)*Math.sin(e),s=this.parameters.l.value*Math.sin(t)*Math.sin(e),i=this.parameters.l.value*Math.cos(e);return{x:a,y:s,z:i}},getGeneralizedMomenta(){let t=(this.parameters.l.value**2*Math.sin(this.initialState.phi.value)**2+this.parameters.a.value**2/4*Math.cos(this.initialState.phi.value)**2)*this.initialState.thetaVel.value+this.parameters.a.value**2/4*this.initialState.psiVel.value*Math.cos(this.initialState.phi.value),e=this.parameters.l.value**2*this.initialState.phiVel.value,a=this.parameters.a.value**2/4*(this.initialState.thetaVel.value*Math.cos(this.initialState.phi.value)+this.initialState.psiVel.value);return{pTheta:t,pPhi:e,pPsi:a}}}};const U=(0,H.Z)(T,[["render",l]]);var C=U,I=(a(9773),a(8727)),R=a(3447),L=a(8600);const D=(0,I.Rd)({components:R,directives:L});(0,s.ri)(C).use(D).mount("#app")}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,r){if(!s){var n=1/0;for(h=0;h<t.length;h++){s=t[h][0],i=t[h][1],r=t[h][2];for(var l=!0,o=0;o<s.length;o++)(!1&r||n>=r)&&Object.keys(a.O).every((function(t){return a.O[t](s[o])}))?s.splice(o--,1):(l=!1,r<n&&(n=r));if(l){t.splice(h--,1);var u=i();void 0!==u&&(e=u)}}return e}r=r||0;for(var h=t.length;h>0&&t[h-1][2]>r;h--)t[h]=t[h-1];t[h]=[s,i,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={826:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,r,n=s[0],l=s[1],o=s[2],u=0;if(n.some((function(e){return 0!==t[e]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(o)var h=o(a)}for(e&&e(s);u<n.length;u++)r=n[u],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(h)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8395)}));s=a.O(s)})();
//# sourceMappingURL=index.f062172e.js.map